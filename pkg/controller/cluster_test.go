package controller

import (
	"github.com/stretchr/testify/assert"
	"k8s.io/apimachinery/pkg/runtime/schema"
	"testing"
)

var defaultCluster = Cluster{
	Name:                  "minikube",
	Server:                "https://192.168.64.72:8443",
	InsecureSkipTLSVerify: false,
	Cert:                  "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURBRENDQWVpZ0F3SUJBZ0lCQWpBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwdGFXNXAKYTNWaVpVTkJNQjRYRFRJd01EUXlPVEE0TXpBeU5Gb1hEVEl4TURRek1EQTRNekF5TkZvd01URVhNQlVHQTFVRQpDaE1PYzNsemRHVnRPbTFoYzNSbGNuTXhGakFVQmdOVkJBTVREVzFwYm1scmRXSmxMWFZ6WlhJd2dnRWlNQTBHCkNTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFERlFSVmlmdjdhcDJKSUw3UGt1cHVhUnZRWDZPZHcKUjlzZElDdFlxZFVvZ2NrR3l2ckVuWk5yRk5HTm0reXVTN1dOdHdRUVZLcHp5Vk5jUzBtNkpuUDNKeDZsOWRHSwpHZGtiMmNKR0wxRk8xaEJBMkJKaWozaW92aStLUml3U1gwVkxFWEpMMUhDNlRmQ3JUZ1J1Tm14QXZxWmVnaGN6CjVPYzNGeWV5N2M2WXl4WmQvWi9VemZYU2FCREZBYTBTcWxzMGxxOWpDcUplcTRBWmNMZldlUVM5cWxpZ28vZUMKdlVzWGJwa3pYRzJXSlRYQWNaNzhUcGFBT290RDVkcEFVcEFvRUIvK2Q2cnJEejBaZ2NJU3REbG5wM3BFeEJrOApPOGZOVC9VZlZpUU9WVklWZGtNdU51SGRvRjJUUG90c05LV0o4L0FXYU5QQ2hpTHN6YTQwLzA5bEFnTUJBQUdqClB6QTlNQTRHQTFVZER3RUIvd1FFQXdJRm9EQWRCZ05WSFNVRUZqQVVCZ2dyQmdFRkJRY0RBUVlJS3dZQkJRVUgKQXdJd0RBWURWUjBUQVFIL0JBSXdBREFOQmdrcWhraUc5dzBCQVFzRkFBT0NBUUVBUE9sRGtScTFhSnZCVld1SwpBaG1LZHZzS0Z1WE5xbXNCRUpQTFRZT1ovMWJucUhNa0M2eDNJcUJWWWNQNXk4YUhsU1llYVIyMVZWS240Mmg0CjZsRmt2R1JwdTJuMjArUW1xc0VJSy9ucDVWdnhRdW05aUMwMUxmeXBrWmk3ZlVPUFFKbFc5SjZRVzNvVnV6bHYKWTVWYVFjaytRbDUwZ2RFSmRqbjZidlBYRnFTVUJJM0lrVEErUjZVTXZFUzlEWHk1UEhMeWJnUGw0Z05KeGQxdgp0QTJ6bncrZDJWWWhDWFdpcjhsN01uRzl5V3RWUWIyVzlBUTM5SGFCVVQyZVh3Zm5aeFhEYzFCUjZ0eUtKbXhICjI2RDVmTWNyam0wT04vakw4ODlua1NDZzJCNWRRemNuWWg0WTEwTzRXL2JoV1Exa0xEa2lHVnBHQ3k5czhsVUgKT1F4MkRBPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=",
	Key:                   "LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBeFVFVlluNysycWRpU0MrejVMcWJta2IwRitqbmNFZmJIU0FyV0tuVktJSEpCc3I2CnhKMlRheFRSalp2c3JrdTFqYmNFRUZTcWM4bFRYRXRKdWlaejl5Y2VwZlhSaWhuWkc5bkNSaTlSVHRZUVFOZ1MKWW85NHFMNHZpa1lzRWw5RlN4RnlTOVJ3dWszd3EwNEVialpzUUw2bVhvSVhNK1RuTnhjbnN1M09tTXNXWGYyZgoxTTMxMG1nUXhRR3RFcXBiTkphdll3cWlYcXVBR1hDMzFua0V2YXBZb0tQM2dyMUxGMjZaTTF4dGxpVTF3SEdlCi9FNldnRHFMUStYYVFGS1FLQkFmL25lcTZ3ODlHWUhDRXJRNVo2ZDZSTVFaUER2SHpVLzFIMVlrRGxWU0ZYWkQKTGpiaDNhQmRrejZMYkRTbGlmUHdGbWpUd29ZaTdNMnVOUDlQWlFJREFRQUJBb0lCQUJGalFGQlRZNEhBdVlBbApmRlVRUWdFaWVnZlZodmsxekZIUDhTSTZya2lJMEVDaUNlTGxCUWF1YWg1eWZUV01CTy8rRHdTbGdmVDg3VFU0CmljSTMrNGJ3MHRuTVJuRkhBQVZkZDZ1YUppK3QzUGJxVlF5Tkd4UzgxeEg0UjVCREI2ZXJYUWprTEIrd0dTUHcKbDZGamVMMW9VT0FKMWFQRWJNRkZjRUZzaHdhZTBMTlRUaE9Gb2tIdnp4UERvYjBPdFYzVEE3NUs5ZlA4L2dWeQozMXVaUm9yZlFMeHp5L056RjAzYkdkRjN4TC96ZEk5WkZhRFNhbEJRUlBwK1J4YXhlOFpsc0ZmWmZucGdOLzJyCkJodUxRZmhQRWxWZDFZYUhYUnpoNVhzRGhXaUllUmladW9QWXlTcXRTemtRb0U0UndTbEQwZUJnOXdxN1VWNXEKemlSaGVRMENnWUVBNXIvTTlOVDQ0SjJ4cXhiSlN5TWdTSjJCZXp0emJxSEhUa3JoeEZDOVlqaFczUFhHS0N6QQp0NWJORCt1RXc4UjBObTc1V1J4M2E4YjFsZFVhdVM2YzZUN01nMG04dHZ3QzNVd1ZERzZlSGhna0JIcUFyaXhUCmlWUFlSNjRkc2E5NWk4TGFYbXM0eUNlWEpFRXZDUEFUS0l1MlY1NGlYcEUyUlo4eVoyQ1haOThDZ1lFQTJ0YjAKcGtQMGppZ3JOUlpleDd6cDBNNGFmd2YydTBCVC8xdS9GWjkrMUl0Y29RbHoxb3hRTlB2WmJpS3VmSCtvWUxwMgo4ZERGbk5mb21Kc3ZOVHV4amV4dkk4QUptRmZkRTBjYit1REhwaE5zSDJkQ1hBWVRFU0Yxek4xWWd0cFNWSVdmCkt1M1VuMHZYRUxhZGJoSGRNTkVzcVZneS9FWXE4bDBuSm0yZGdUc0NnWUJiOGQwM1NZMko0d3dpZ2tmZk9yWG8KZVdwWXNrM0NyWS8vTUhOWmlGcU9RcWpLRHR6UXNWUnhVeE9PM21mZW9lODBxVytPQkh2SlpGUURTaEVGN1A3MQpLZUxRQlplK3loaFNHYmpoWlVwMzcyS2FyajJNS1hsMzVRTHZQUC8wQjFuRlNQVStYamNYK2o2TlliUGVPZHRJCmNyTkxvbVZMalUwMDNNUjIwTlJEdlFLQmdEeUx4RnhMNk5sNzI1aHdmQUNmRDhHcGhFTXBIT1pwd2RPZ3VwbHMKNjFZNnlJSDFiNHNvZnZocHhacG5GZ2R6K2szb3lRZldUeFk1MWl5Q291a0RmdmhaTmRhYVJ3MVRJZU0zaFZJLwo1bnpZV3MzRmIrS3QrNUI5eFczTXY3UlVXdnJ2alQzL1Z4aExqMUVjZFNvQzMwT21XOGp1a2d5aURUZkk5Zy8zCnUrQUpBb0dCQUt4YWEybnBNcE43N1BTKy9hZGdqQlk4WStoQStoSFBlR21QQ2g0NEl5YW8rMUJHV3ptczI4SU0KbVl2ZS9BOWN4eDkrVnNHSVVVZUJWSTM2VWhnTW82QmpLaFhJL2M1QWlITW54a2VJeVRNd3hHZFE2KzVLQ1FzMQpvWEVBUVFrbVNTcUJaelJNOTNaVkhFN0ZQZWlYL2REM1Q2YmZuUnBaVURmZFRoUys5ZTJWCi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==",
	Ca:                    "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM1ekNDQWMrZ0F3SUJBZ0lCQVRBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwdGFXNXAKYTNWaVpVTkJNQjRYRFRJd01EUXlPVEE0TXpBeU5Gb1hEVE13TURReU9EQTRNekF5TkZvd0ZURVRNQkVHQTFVRQpBeE1LYldsdWFXdDFZbVZEUVRDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTTlUClEycFdVRWwwSzRxbUVkT0NKZDIyY3AzVHBqQUxDMDdKZlJOaG0yZ1R1c2tpM2dSYnlBcGJiN3BoWnBhTWQ0K0YKTEFvVm9EZ2dOZDlCTkZKeGVXMlg0cVR2NHdqdWZGc0VBK2o3a2t5MnE2MkZLWVFDTFlSc0IrM0lIaUpBTVBaUQp0OHRNT0NFc1EzMSt2U2EwWUcraUx0RXNHakVKRk1kdEJTL0lnbmUxc3RwbEc0NjVIQU9QUVk4TCtZSk9SUEl2CkZwdk5pbkszamJwaHBRaWN6M3c0cTdGaXU0NjI5cHRxNENDWk1VbVBFbDBPRUNOQVpwWkJxSzJUOE9QbW5SYlMKU1BxOXlQWHo5WGovNllKWmorSmJZTk5yT21EeW03TjFMc0g3Zyt6UlBnYlhMTGZVcUpzbmYzSjU3MUpReU12UwpEWmkvSjVxQWZEdFdHRDlNdzlzQ0F3RUFBYU5DTUVBd0RnWURWUjBQQVFIL0JBUURBZ0trTUIwR0ExVWRKUVFXCk1CUUdDQ3NHQVFVRkJ3TUNCZ2dyQmdFRkJRY0RBVEFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQTBHQ1NxR1NJYjMKRFFFQkN3VUFBNElCQVFDcTUwMDVXblBqdVRybU9JWjdhdkZkUXZNV3pRQkJxYk1GZDk1aG5jc3drYktrZS9sYgovcjdrcVQxUWdyU1o5bEVsQXVOaHpNQlhzWGtGM2lxMTJNaW5nM1Q1a0pFbW15aUxEZnZIYnhhd2cwRUpEWHNUCnJlM250N3ljd01KSFFnc0d2UVd5cWNGdm5idkFrYlZvNXFtYTJpTmhyOHBGMldndHZsSXZpb3lTbTlrRGFJbkUKRThuMjZpYm5ieUk3QWx0TGtrUGl3enVsZVBVSnk5bHRhNWRUMldYT0FpczJ4cmVBS2l3eTRhM0xESi9Ha1RMcwpPVk5TWDVlQWlZeFMwdldTWW1zMExMbENYNFZZaFNPU0NUeTJWTUtseHJIRnpza1dUeitQNTlxaHBldTVUTzdwCmtLRkgrYVJxM2V5QnhZdUZCbmJOTm5qYkU5RnNyRDlhYTdWSgotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==",
}

func TestCluster_GetClient(t *testing.T) {
	cluster := defaultCluster
	client, err := cluster.GetClient(&schema.GroupVersionResource{
		Group:    "apps",
		Version:  "v1",
		Resource: "Deployments",
	})
	if err != nil {
		t.Fatal(err)
	}
	assert.NotNil(t, client, "Expected client to be not nil")
}

func TestCluster_b64ToBytes(t *testing.T) {
	str := "not base64"
	b := b64ToBytes(str)
	assert.Nil(t, b, "Expected b to be nil")
}
